<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Sort Visualization</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #f5f5f5;
            display: flex;
            justify-content: center;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }

        button {
            padding: 8px 16px;
            font-weight: 600;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .start-btn {
            background-color: #3b82f6;
            color: white;
        }

        .start-btn:hover:not(:disabled) {
            background-color: #2563eb;
        }

        .reset-btn {
            background-color: #6b7280;
            color: white;
        }

        .reset-btn:hover:not(:disabled) {
            background-color: #4b5563;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .array-container {
            height: 250px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 4px;
            padding: 10px;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 20px;
        }

        .bar {
            width: 30px;
            background-color: #60a5fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
            border-radius: 2px 2px 0 0;
            transition: height 0.3s ease, background-color 0.3s ease;
        }

        .comparing {
            background-color: #fbbf24;
        }

        .sorted {
            background-color: #34d399;
        }

        .status {
            text-align: center;
            margin-bottom: 20px;
            font-size: 16px;
            color: #4b5563;
        }

        .explanation {
            background-color: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            margin-top: 20px;
        }

        .explanation h2 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #374151;
        }

        .explanation p {
            font-size: 14px;
            line-height: 1.5;
            color: #4b5563;
            margin-bottom: 10px;
        }

        .legend {
            margin-top: 10px;
            list-style-type: none;
        }

        .legend li {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .legend-color {
            width: 20px;
            height: 12px;
            margin-right: 8px;
            border-radius: 2px;
        }

        .yellow {
            background-color: #fbbf24;
        }

        .green {
            background-color: #34d399;
        }

        .blue {
            background-color: #60a5fa;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Bubble Sort Visualization</h1>
        
        <div class="controls">
            <button class="start-btn" id="startBtn">Start Sorting</button>
            <button class="reset-btn" id="resetBtn">Reset</button>
            <div class="speed-control">
                <span>Speed:</span>
                <input type="range" id="speedSlider" min="10" max="1000" value="500">
            </div>
        </div>
        
        <div class="array-container" id="arrayContainer"></div>
        
        <div class="status" id="status">Click 'Start Sorting' to begin</div>
        
        <div class="explanation">
            <h2>Bubble Sort Explanation</h2>
            <p>
                Bubble sort is a simple sorting algorithm that repeatedly steps through the list,
                compares adjacent elements, and swaps them if they are in the wrong order.
                The pass through the list is repeated until the list is sorted.
            </p>
            <ul class="legend">
                <li><span class="legend-color yellow"></span>Elements being compared</li>
                <li><span class="legend-color green"></span>Elements in their final sorted position</li>
                <li><span class="legend-color blue"></span>Unsorted elements</li>
            </ul>
        </div>
    </div>
    
    <script>
        // DOM Elements
        const arrayContainer = document.getElementById('arrayContainer');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const speedSlider = document.getElementById('speedSlider');
        const statusDisplay = document.getElementById('status');
        
        // Variables
        let array = [];
        let sortingInProgress = false;
        let currentStep = -1;
        let comparing = [-1, -1];
        let sorted = [];
        
        // Generate random array
        function generateArray() {
            arrayContainer.innerHTML = '';
            array = [];
            
            for (let i = 0; i < 10; i++) {
                const value = Math.floor(Math.random() * 90) + 10; // Value between 10-99
                array.push(value);
                
                const bar = document.createElement('div');
                bar.classList.add('bar');
                bar.style.height = `${value * 2}px`;
                bar.textContent = value;
                
                arrayContainer.appendChild(bar);
            }
            
            sorted = [];
            currentStep = -1;
            comparing = [-1, -1];
            statusDisplay.textContent = "Click 'Start Sorting' to begin";
        }
        
        // Update the visualization
        function updateVisualization() {
            const bars = arrayContainer.children;
            
            for (let i = 0; i < bars.length; i++) {
                bars[i].textContent = array[i];
                bars[i].style.height = `${array[i] * 2}px`;
                
                // Reset all classes first
                bars[i].classList.remove('comparing', 'sorted');
                bars[i].classList.add('bar');
                
                // Apply appropriate class
                if (comparing.includes(i)) {
                    bars[i].classList.add('comparing');
                } else if (sorted.includes(i)) {
                    bars[i].classList.add('sorted');
                }
            }
        }
        
        // Sleep function for animation delay
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        // Bubble sort algorithm with animation
        async function bubbleSort() {
            if (sortingInProgress) return;
            
            sortingInProgress = true;
            setControlsState(true);
            currentStep = 0;
            
            const n = array.length;
            
            for (let i = 0; i < n; i++) {
                for (let j = 0; j < n - i - 1; j++) {
                    // Highlight elements being compared
                    comparing = [j, j + 1];
                    currentStep++;
                    statusDisplay.textContent = `Step: ${currentStep}`;
                    updateVisualization();
                    
                    // Delay to show comparison
                    await sleep(1000 - speedSlider.value);
                    
                    // Swap if needed
                    if (array[j] > array[j + 1]) {
                        [array[j], array[j + 1]] = [array[j + 1], array[j]];
                        updateVisualization();
                        
                        // Delay after swap
                        await sleep(1000 - speedSlider.value);
                    }
                }
                
                // Mark element as sorted
                sorted.unshift(n - i - 1);
                updateVisualization();
            }
            
            // Sorting complete
            comparing = [-1, -1];
            updateVisualization();
            sortingInProgress = false;
            setControlsState(false);
            statusDisplay.textContent = "Sorting complete!";
        }
        
        // Enable/disable controls during sorting
        function setControlsState(disabled) {
            startBtn.disabled = disabled;
            resetBtn.disabled = disabled;
            speedSlider.disabled = disabled;
        }
        
        // Event listeners
        startBtn.addEventListener('click', bubbleSort);
        resetBtn.addEventListener('click', generateArray);
        
        // Initialize
        generateArray();
    </script>
</body>
</html>
